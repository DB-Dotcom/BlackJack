const franzoesischesBlatt = [
    // Herz
    {
      name: 'HerzZahl2',
      wert: 2,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 2               |
         |    ♥         ♥  |
         |               2 |
         '-----------------'`,
      id: 0
    },
    {
      name: 'HerzZahl3',
      wert: 3,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 3               |
         |    ♥   3   ♥    |
         |               3 |
         '-----------------'`,
      id: 1
    },
    {
      name: 'HerzZahl4',
      wert: 4,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 4           4   |
         |    ♥         ♥  |
         |   4           4 |
         '-----------------'`,
      id: 2
    },
    {
      name: 'HerzZahl5',
      wert: 5,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 5           5   |
         |    ♥     5   ♥  |
         |   5           5 |
         '-----------------'`,
      id: 3
    },
    {
      name: 'HerzZahl6',
      wert: 6,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 6           6   |
         |    ♥  6   ♥    |
         |   6           6 |
         '-----------------'`,
      id: 4
    },
    {
      name: 'HerzZahl7',
      wert: 7,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 7           7   |
         |    ♥  7   ♥    |
         |   7           7 |
         '-----------------'`,
      id: 5
    },
    {
      name: 'HerzZahl8',
      wert: 8,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 8           8   |
         |    ♥  8   ♥    |
         |   8           8 |
         '-----------------'`,
      id: 6
    },
    {
      name: 'HerzZahl9',
      wert: 9,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 9           9   |
         |    ♥  9   ♥    |
         |   9           9 |
         '-----------------'`,
      id: 7
    },
    {
      name: 'HerzZahl10',
      wert: 10,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | 10          10  |
         |    ♥   10  ♥    |
         |   10          10 |
         '-----------------'`,
      id: 8
    },
    {
      name: 'HerzBube',
      wert: 10,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | Bube        Bube|
         |    ♥         ♥  |
         |  Bube       Bube|
         '-----------------'`,
      id: 9
    },
    {
      name: 'HerzDame',
      wert: 10,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | Dame        Dame|
         |    ♥         ♥  |
         |  Dame       Dame|
         '-----------------'`,
      id: 10
    },
    {
      name: 'HerzKönig',
      wert: 10,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | König      König|
         |    ♥         ♥  |
         |  König     König|
         '-----------------'`,
      id: 11
    },
    {
      name: 'HerzAss',
      wert: 11,
      farbe: 'Herz',
      bild: `
         .-----------------.
         | Ass           Ass|
         |    ♥         ♥  |
         |  Ass           Ass|
         '-----------------'`,
      id: 12
    },
  
    // Karo
    {
      name: 'KaroZahl2',
      wert: 2,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 2               |
         |    ♦         ♦  |
         |               2 |
         '-----------------'`,
      id: 13
    },
    {
      name: 'KaroZahl3',
      wert: 3,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 3               |
         |    ♦   3   ♦    |
         |               3 |
         '-----------------'`,
      id: 14
    },
    {
      name: 'KaroZahl4',
      wert: 4,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 4           4   |
         |    ♦         ♦  |
         |   4           4 |
         '-----------------'`,
      id: 15
    },
    {
      name: 'KaroZahl5',
      wert: 5,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 5           5   |
         |    ♦     5   ♦  |
         |   5           5 |
         '-----------------'`,
      id: 16
    },
    {
      name: 'KaroZahl6',
      wert: 6,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 6           6   |
         |    ♦  6   ♦    |
         |   6           6 |
         '-----------------'`,
      id: 17
    },
    {
      name: 'KaroZahl7',
      wert: 7,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 7           7   |
         |    ♦  7   ♦    |
         |   7           7 |
         '-----------------'`,
      id: 18
    },
    {
      name: 'KaroZahl8',
      wert: 8,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 8           8   |
         |    ♦  8   ♦    |
         |   8           8 |
         '-----------------'`,
      id: 19
    },
    {
      name: 'KaroZahl9',
      wert: 9,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 9           9   |
         |    ♦  9   ♦    |
         |   9           9 |
         '-----------------'`,
      id: 20
    },
    {
      name: 'KaroZahl10',
      wert: 10,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | 10          10  |
         |    ♦   10  ♦    |
         |   10          10 |
         '-----------------'`,
      id: 21
    },
    {
      name: 'KaroBube',
      wert: 10,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | Bube        Bube|
         |    ♦         ♦  |
         |  Bube       Bube|
         '-----------------'`,
      id: 22
    },
    {
      name: 'KaroDame',
      wert: 10,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | Dame        Dame|
         |    ♦         ♦  |
         |  Dame       Dame|
         '-----------------'`,
      id: 23
    },
    {
      name: 'KaroKönig',
      wert: 10,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | König      König|
         |    ♦         ♦  |
         |  König     König|
         '-----------------'`,
      id: 24
    },
    {
      name: 'KaroAss',
      wert: 11,
      farbe: 'Karo',
      bild: `
         .-----------------.
         | Ass           Ass|
         |    ♦         ♦  |
         |  Ass           Ass|
         '-----------------'`,
      id: 25
    },
  
    // Pik
    {
      name: 'PikZahl2',
      wert: 2,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 2               |
         |    ♠         ♠  |
         |               2 |
         '-----------------'`,
      id: 26
    },
    {
      name: 'PikZahl3',
      wert: 3,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 3               |
         |    ♠   3   ♠    |
         |               3 |
         '-----------------'`,
      id: 27
    },
    {
      name: 'PikZahl4',
      wert: 4,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 4           4   |
         |    ♠         ♠  |
         |   4           4 |
         '-----------------'`,
      id: 28
    },
    {
      name: 'PikZahl5',
      wert: 5,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 5           5   |
         |    ♠     5   ♠  |
         |   5           5 |
         '-----------------'`,
      id: 29
    },
    {
      name: 'PikZahl6',
      wert: 6,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 6           6   |
         |    ♠  6   ♠    |
         |   6           6 |
         '-----------------'`,
      id: 30
    },
    {
      name: 'PikZahl7',
      wert: 7,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 7           7   |
         |    ♠  7   ♠    |
         |   7           7 |
         '-----------------'`,
      id: 31
    },
    {
      name: 'PikZahl8',
      wert: 8,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 8           8   |
         |    ♠  8   ♠    |
         |   8           8 |
         '-----------------'`,
      id: 32
    },
    {
      name: 'PikZahl9',
      wert: 9,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 9           9   |
         |    ♠  9   ♠    |
         |   9           9 |
         '-----------------'`,
      id: 33
    },
    {
      name: 'PikZahl10',
      wert: 10,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | 10          10  |
         |    ♠   10  ♠    |
         |   10          10 |
         '-----------------'`,
      id: 34
    },
    {
      name: 'PikBube',
      wert: 10,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | Bube        Bube|
         |    ♠         ♠  |
         |  Bube       Bube|
         '-----------------'`,
      id: 35
    },
    {
      name: 'PikDame',
      wert: 10,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | Dame        Dame|
         |    ♠         ♠  |
         |  Dame       Dame|
         '-----------------'`,
      id: 36
    },
    {
      name: 'PikKönig',
      wert: 10,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | König      König|
         |    ♠         ♠  |
         |  König     König|
         '-----------------'`,
      id: 37
    },
    {
      name: 'PikAss',
      wert: 11,
      farbe: 'Pik',
      bild: `
         .-----------------.
         | Ass           Ass|
         |    ♠         ♠  |
         |  Ass           Ass|
         '-----------------'`,
      id: 38
    },
  
    // Kreuz
    {
      name: 'KreuzZahl2',
      wert: 2,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 2               |
         |    ♣         ♣  |
         |               2 |
         '-----------------'`,
      id: 39
    },
    {
      name: 'KreuzZahl3',
      wert: 3,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 3               |
         |    ♣   3   ♣    |
         |               3 |
         '-----------------'`,
      id: 40
    },
    {
      name: 'KreuzZahl4',
      wert: 4,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 4           4   |
         |    ♣         ♣  |
         |   4           4 |
         '-----------------'`,
      id: 41
    },
    {
      name: 'KreuzZahl5',
      wert: 5,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 5           5   |
         |    ♣     5   ♣  |
         |   5           5 |
         '-----------------'`,
      id: 42
    },
    {
      name: 'KreuzZahl6',
      wert: 6,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 6           6   |
         |    ♣  6   ♣    |
         |   6           6 |
         '-----------------'`,
      id: 43
    },
    {
      name: 'KreuzZahl7',
      wert: 7,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 7           7   |
         |    ♣  7   ♣    |
         |   7           7 |
         '-----------------'`,
      id: 44
    },
    {
      name: 'KreuzZahl8',
      wert: 8,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 8           8   |
         |    ♣  8   ♣    |
         |   8           8 |
         '-----------------'`,
      id: 45
    },
    {
      name: 'KreuzZahl9',
      wert: 9,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 9           9   |
         |    ♣  9   ♣    |
         |   9           9 |
         '-----------------'`,
      id: 46
    },
    {
      name: 'KreuzZahl10',
      wert: 10,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | 10          10  |
         |    ♣   10  ♣    |
         |   10          10 |
         '-----------------'`,
      id: 47
    },
    {
      name: 'KreuzBube',
      wert: 10,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | Bube        Bube|
         |    ♣         ♣  |
         |  Bube       Bube|
         '-----------------'`,
      id: 48
    },
    {
      name: 'KreuzDame',
      wert: 10,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | Dame        Dame|
         |    ♣         ♣  |
         |  Dame       Dame|
         '-----------------'`,
      id: 49
    },
    {
      name: 'KreuzKönig',
      wert: 10,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | König      König|
         |    ♣         ♣  |
         |  König     König|
         '-----------------'`,
      id: 50
    },
    {
      name: 'KreuzAss',
      wert: 11,
      farbe: 'Kreuz',
      bild: `
         .-----------------.
         | Ass          Ass|
         |    ♣         ♣  |
         |  Ass         Ass|
         '-----------------'`,
      id: 51
    }
  ]
  
  // ----------------------------------------- game code ------------------------------------------------------------------
  
  // Erstellt eine Schnittstelle für die Ein- und Ausgabe.
  
  // Imports
  import inquirer from 'inquirer'
  
  // Deklaration der Spielvariablen
  let spielerHand = []
  let dealerHand = []
  let deck = [...franzoesischesBlatt] // Das Deck mit den Spielkarten.
  let spielerPunkte = 0
  let dealerPunkte = 0
  let spielerCoins = 500 // Starteinlage des Spielers.
  let aktuellerEinsatz = 0 // Der Standard-Einsatz zu Beginn.
  
  // Funktion zum Ziehen einer zufälligen Karte aus dem Deck.
  function randomKarte () {
    const randomIndex = Math.floor(Math.random() * deck.length)
    return deck.splice(randomIndex, 1)[0] // Zieht eine zufällige Karte aus dem Deck und entfernt sie daraus.
  }
  
  // Funktion zum Berechnen der Punktzahl einer Hand.
  function berechnePunkte (hand) {
    return hand.reduce((sum, karte) => sum + karte.wert, 0) // Berechnet die Gesamtpunktzahl einer Hand.
  }
  
  // Funktion für den Dealerzug.
  function dealerZug () {
    while (dealerPunkte < 17) {
      const karte = randomKarte()
      dealerHand.push(karte) // Der Dealer zieht Karten, bis er mindestens 17 Punkte hat.
      dealerPunkte = berechnePunkte(dealerHand)
    }
    zeigeDealerHand(dealerHand)
  }
  
    // !Funktion zum Anzeigen der Spielerhand (Karten nebeneinander)
function zeigeSpielerHand(arr) {
  const zusammenGesetzt = ["", "", "", "", "", "", ""];
  for (let i = 0; i < arr.length; i++) {
    const card = arr[i].bild;
    const cardArray = card.split("\n");

    for (let j = 0; j < cardArray.length; j++) {
      zusammenGesetzt[j] += cardArray[j];
    }
  }
  console.log(zusammenGesetzt.join("\n"));
}

// ! !!Funktion zum Anzeigen der Dealerhand (Karten nebeneinander)
function zeigeDealerHand(arr) {
  const zusammenGesetzt = ["", "", "", "", "", "", ""];

  // Zeige die erste Karte des Dealers
  const ersteKarte = arr[0].bild;
  const ersteKartenArray = ersteKarte.split("\n");

  for (let j = 0; j < ersteKartenArray.length; j++) {
    zusammenGesetzt[j] += ersteKartenArray[j];
  }

    // Zeige die zweite Karte als Fragezeichen
    const fragezeichenblatt = `
    .-----------------.
    | ?           ?   |
    |       ???       |
    |   ?           ? |
    '-----------------'`
    const fragezeichenArray = fragezeichenblatt.split('\n')
  
    for (let j = 0; j < fragezeichenArray.length; j++) {
      zusammenGesetzt[j] += fragezeichenArray[j]
    }
  
    console.log(zusammenGesetzt.join('\n'))
  }
  

  // Funktion für einen Neustart des Spiels.
  function neustart () {
    inquirer
      .prompt([
       /*  {
          type: 'input',
          name: 'spielerCoins',
          message: 'Gib deinen gewünschten Anfangsstand an (positive Zahl):',
          validate: function (value) {
            const parsedValue = parseInt(value)
            if (isNaN(parsedValue) || parsedValue <= 0) {
              return 'Bitte gib eine positive Zahl ein.'
            }
            return true
          }
        }, */
        {
          type: 'list',
          name: 'neuerEinsatz',
          message: 'Wähle deinen neuen Einsatz oder beende das Spiel:',
          choices: ['10', '20', '30', 'Spiel beenden']
        }
      ])
      .then(answers => {
        if (answers.neuerEinsatz === 'Spiel beenden') {
          console.log('Spiel beendet. Auf Wiedersehen!')
          return rl.close() // Beendet das Spiel, wenn der Spieler "Spiel beenden" wählt.
        } else {
         /*  spielerCoins = parseInt(answers.spielerCoins) */
          aktuellerEinsatz = parseInt(answers.neuerEinsatz)
          spielerHand = []
          dealerHand = []
          deck = [...franzoesischesBlatt]
          spielerPunkte = 0
          dealerPunkte = 0
          starteSpiel()
        }
      })
  }
  
  // Funktion zum Beenden des Spiels und Fragen nach einem Neustart.
  function beendeSpiel () {
    inquirer
      .prompt([
        {
          type: 'list',
          name: 'weiterSpielen',
          message: 'Möchtest du nochmal spielen?',
          choices: ['ja', 'nein']
        }
      ])
      .then(answers => {
        if (answers.weiterSpielen === 'ja') {
          neustart() // Startet ein neues Spiel, wenn der Spieler "ja" sagt.
          console.clear();
        } else {
          console.log('Spiel beendet. Auf Wiedersehen!')
          
        }
      })
  }

  // Funktion zum Anzeigen des Startbildschirms.
  function showStartScreen() {
    const startScreen = `
    888     888                888       d8b                888      
    888     888                888       Y8P                888      
    888     888                888                          888      
    88888b. 888 8888b.  .d8888b888  888 8888 8888b.  .d8888b888  888 
    888 "88b888    "88bd88P"   888 .88P "888    "88bd88P"   888 .88P 
    888  888888.d888888888     888888K   888.d888888888     888888K  
    888 d88P888888  888Y88b.   888 "88b  888888  888Y88b.   888 "88b 
    88888P" 888"Y888888 "Y8888P888  888  888"Y888888 "Y8888P888  888 
                                         888                         
                                        d88P                         
                                      888P"       
    `;
    console.clear();
    console.log(startScreen);
  }

  


/*   function getInitialCoins() {
    inquirer
      .prompt([
        {
          type: 'input',
          name: 'spielerCoins',
          message: 'Gib deinen gewünschten Anfangsstand an (positive Zahl):',
          validate: function (value) {
            const parsedValue = parseInt(value);
            if (isNaN(parsedValue) || parsedValue <= 0) {
              return 'Bitte gib eine positive Zahl ein.';
            }
            return true;
          },
        },
      ])
      .then(answers => {
        const spielerCoins = parseInt(answers.spielerCoins);
        console.log(`Du hast ${spielerCoins} Anfangscoins.`);
        // Hier kannst du mit dem Spiel fortfahren.
      });
  }
  */

  // #################################################################  Spielstart

  // Funktion zum Starten des Spiels.

  showStartScreen() // wilkommen bildschirm
/*   getInitialCoins() */ // fragt nach anfangscoins
console.log(`Du hast ${spielerCoins} Anfangscoins.`);


 
  function starteSpiel () {
    // Verteilt die Anfangshand.
    spielerHand.push(randomKarte()) // Zieht eine zufällige Karte aus dem Deck und fügt sie der Spielerhand hinzu.
    spielerHand.push(randomKarte()) // Zieht eine zufällige Karte aus dem Deck und fügt sie der Spielerhand hinzu.
    dealerHand.push(randomKarte()) // Zieht eine zufällige Karte aus dem Deck und fügt sie der Dealerhand hinzu.
    dealerHand.push(randomKarte()) // Zieht eine zufällige Karte aus dem Deck und fügt sie der Dealerhand hinzu.
  
    spielerPunkte = berechnePunkte(spielerHand)
    dealerPunkte = berechnePunkte(dealerHand)
   
    console.log('Willkommen beim Blackjack-Spiel!\n')
    console.log(`Du hast ${spielerCoins} Coins.`)  // Zeigt die Anzahl der Coins des Spielers.
    console.log(`Aktueller Einsatz: ${aktuellerEinsatz} Coins.\n`) // Zeigt den aktuellen Einsatz.
  
    // Zeigt die Anfangshand des Dealers.
    console.log('Dealer Hand:')
    zeigeDealerHand(dealerHand)
    console.log(`Dealer Punkte: ${dealerPunkte}\n`)
  
    // Zeigt die Anfangshand des Spielers.
    console.log('Deine Hand:')
    zeigeSpielerHand(spielerHand)
    console.log(`Deine Punkte: ${spielerPunkte}\n`)
  
    spielerZug() // Startet den Spielerzug.
  
  
  // Funktion für den Spielerzug
  function spielerZug () {
    inquirer
      .prompt([ // Fragt den Spieler, ob er eine Karte ziehen oder behalten möchte.
        {
          type: 'list',
          name: 'zugOption',
          message: `Möchtest du "hit" (eine Karte ziehen), "stand" (behalten) oder "double" (Einsatz verdoppeln)? Aktueller Einsatz: ${aktuellerEinsatz} Coins.`,
          choices: ['hit', 'stand', 'double']
        }
      ])
      .then(answers => { // Verarbeitet die Antwort des Spielers.
        switch (answers.zugOption) {
          case 'hit': // Der Spieler zieht eine Karte.
            // Der Spieler zieht eine Karte.
            spielerHand.push(randomKarte())
            spielerPunkte = berechnePunkte(spielerHand)
            zeigeSpielerHand(spielerHand)
  
            // Überprüft, ob der Spieler mehr als 21 Punkte hat.
            if (spielerPunkte > 21) {
              console.log('Du hast verloren! Du hast mehr als 21 Punkte.')
              spielerCoins -= aktuellerEinsatz
              beendeSpiel()
            } else {
              // Wenn der Spieler weniger als 21 Punkte hat, geht das Spiel weiter.
              spielerZug()
            }
            break
  
          case 'stand': // Der Spieler behält seine Karten, und der Dealer ist an der Reihe.
            // Der Spieler behält seine Karten, und der Dealer ist an der Reihe.
            dealerZug()
            if (
              dealerPunkte > 21 ||
              dealerPunkte < spielerPunkte ||
              spielerPunkte === 21
            ) {
              console.log('Glückwunsch! Du hast gewonnen.')
              if (spielerPunkte === 21) {
                console.log('Blackjack.')
                spielerCoins += aktuellerEinsatz * 2
              } else {
                spielerCoins += aktuellerEinsatz
              }
            } else if (dealerPunkte === spielerPunkte) {
              console.log('Unentschieden! Niemand gewinnt.')
            } else {
              console.log('Dealer gewinnt! Du hast verloren.')
              spielerCoins -= aktuellerEinsatz
            }
            console.log(`Du hast jetzt ${spielerCoins} Coins.\n`)
            beendeSpiel()
            break
  
          case 'double':
            // Der Spieler verdoppelt seinen Einsatz und zieht eine Karte.
            aktuellerEinsatz *= 2
            console.log(
              `Du hast deinen Einsatz verdoppelt. Neuer Einsatz: ${aktuellerEinsatz} Coins.`
            )
            const karte = randomKarte()
            spielerHand.push(karte)
            spielerPunkte = berechnePunkte(spielerHand)
            zeigeSpielerHand(spielerHand)
  
            // Überprüft, ob der Spieler mehr als 21 Punkte hat.
            if (spielerPunkte > 21) {
              console.log('Du hast verloren! Du hast mehr als 21 Punkte.')
              spielerCoins -= aktuellerEinsatz
              beendeSpiel()
            } else {
              // Wenn der Spieler weniger als 21 Punkte hat, geht das Spiel weiter.
              dealerZug()
            }
            break
  
      
        }
      })

  // ******************************************************************** end

 
  }
  // Startet den Spielerzug.
}
  
  // Start des Spiels
  neustart()
  